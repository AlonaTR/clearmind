{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useHistory,Link}from'react-router-dom';import{Helmet}from'react-helmet';import axios from'axios';import'./activity.css';import ActivityCalendar from'react-activity-calendar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Activity=props=>{const[activityData,setActivityData]=useState([]);const[selectedYear,setSelectedYear]=useState(new Date().getFullYear());const data=[{date:'2024-01-01',count:1,level:1},{date:'2024-01-03',count:4,level:2},{date:'2024-01-06',count:2,level:3},{date:'2024-12-31',count:0,level:0}// ...and so on\n];const explicitTheme={light:['#f0f0f0','#c4edde','#7ac7c4','#f73859','#384259'],dark:['#383838','#4D455D','#7DB9B6','#F5E9CF','#E96479']};useEffect(()=>{let isMounted=true;// Add this flag\nconst fetchData=async()=>{try{const response=await axios.get('/api/user-activity');console.log('Response data:',response.data);if(isMounted){// Check if the component is still mounted\nconst processedData=processActivityData(response.data);setActivityData(processedData);}}catch(error){console.error('Error fetching activity data:',error);}};fetchData();return()=>{isMounted=false;// Set the flag to false when the component unmounts\n};},[]);const processActivityData=data=>{// Create an object to hold the processed data\nconst processedData={};// Iterate over each data item\ndata.forEach(item=>{// Extract the year and month from the date\nconst date=new Date(item.date);const year=date.getFullYear();const month=date.toLocaleString('default',{month:'short'});// Initialize the year object if it doesn't exist\nif(!processedData[year]){processedData[year]={year,months:Array(12).fill(0),// Initialize an array of 12 months with 0 contributions\ncontributions:0};}// Increment the contribution count for the month\nconst monthIndex=date.getMonth();// Get the month index (0-11)\nprocessedData[year].months[monthIndex]++;processedData[year].contributions++;});// Convert the processed data object into an array\nreturn Object.values(processedData)||[];};const onDatePicked=date=>{alert(date);};return/*#__PURE__*/_jsxs(\"div\",{className:\"account-container\",children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"title\",{children:\"My Activity - Clear Mind\"}),/*#__PURE__*/_jsx(\"meta\",{property:\"og:title\",content:\"Account - Clear Mind\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"account-hero\",children:/*#__PURE__*/_jsx(\"div\",{className:\"account-hero1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"account-container1\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"log-in-hero-heading heading1\",children:/*#__PURE__*/_jsx(Link,{to:\"/home\",className:\"log-in-hero-heading-link\",children:\"Clear Mind\"})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"calendar\",children:/*#__PURE__*/_jsx(ActivityCalendar,{data:data,showWeekdayLabels:true,blockSize:14,blockRadius:7,blockMargin:5,fontSize:16,theme:{light:['#f0f0f0','#c4edde','#7ac7c4','#f73859','#384259'],dark:['#383838','#4D455D','#7DB9B6','#F5E9CF','#E96479']}})})]});};export default Activity;","map":{"version":3,"names":["React","useState","useEffect","useHistory","Link","Helmet","axios","ActivityCalendar","jsx","_jsx","jsxs","_jsxs","Activity","props","activityData","setActivityData","selectedYear","setSelectedYear","Date","getFullYear","data","date","count","level","explicitTheme","light","dark","isMounted","fetchData","response","get","console","log","processedData","processActivityData","error","forEach","item","year","month","toLocaleString","months","Array","fill","contributions","monthIndex","getMonth","Object","values","onDatePicked","alert","className","children","property","content","to","showWeekdayLabels","blockSize","blockRadius","blockMargin","fontSize","theme"],"sources":["D:/polska/clearmind/meditation_project/reactapp/src/views/activity.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useHistory, Link  } from 'react-router-dom'\nimport { Helmet } from 'react-helmet'\nimport axios from 'axios';\nimport './activity.css'\nimport ActivityCalendar from 'react-activity-calendar'\n\n\nconst Activity = (props) => {\n  const [activityData, setActivityData] = useState([]);\n  const [selectedYear, setSelectedYear] = useState(new Date().getFullYear());\n\n  const data = [\n    { date: '2024-01-01', count: 1, level:1 },\n    { date: '2024-01-03', count: 4, level:2 },\n    { date: '2024-01-06', count: 2, level:3},\n    { date: '2024-12-31', count: 0, level:0 },\n    // ...and so on\n  ];\n\n  const explicitTheme: ThemeInput = {\n    light: ['#f0f0f0', '#c4edde', '#7ac7c4', '#f73859', '#384259'],\n    dark: ['#383838', '#4D455D', '#7DB9B6', '#F5E9CF', '#E96479'],\n  };\n \n\n  useEffect(() => {\n    let isMounted = true; // Add this flag\n  \n    const fetchData = async () => {\n      try {\n        const response = await axios.get('/api/user-activity'); \n        console.log('Response data:', response.data);\n        if (isMounted) { // Check if the component is still mounted\n          const processedData = processActivityData(response.data);\n          setActivityData(processedData);\n        }\n      } catch (error) {\n        console.error('Error fetching activity data:', error);\n      }\n    };\n  \n    fetchData();\n  \n    return () => {\n      isMounted = false; // Set the flag to false when the component unmounts\n    };\n  }, []);\n\n  const processActivityData = (data) => {\n    // Create an object to hold the processed data\n    const processedData = {};\n  \n    // Iterate over each data item\n    data.forEach((item) => {\n      // Extract the year and month from the date\n      const date = new Date(item.date);\n      const year = date.getFullYear();\n      const month = date.toLocaleString('default', { month: 'short' });\n  \n      // Initialize the year object if it doesn't exist\n      if (!processedData[year]) {\n        processedData[year] = {\n          year,\n          months: Array(12).fill(0), // Initialize an array of 12 months with 0 contributions\n          contributions: 0,\n        };\n      }\n  \n      // Increment the contribution count for the month\n      const monthIndex = date.getMonth(); // Get the month index (0-11)\n      processedData[year].months[monthIndex]++;\n      processedData[year].contributions++;\n    });\n  \n    // Convert the processed data object into an array\n    return Object.values(processedData) || [];\n  };\n\n  const onDatePicked = (date) => {\n    alert(date);\n  };\n\n  return (\n    <div className=\"account-container\">\n      <Helmet>\n        <title>My Activity - Clear Mind</title>\n        <meta property=\"og:title\" content=\"Account - Clear Mind\" />\n      </Helmet>\n      <div className=\"account-hero\">\n        <div className=\"account-hero1\">\n          <div className=\"account-container1\">\n            <h1 className=\"log-in-hero-heading heading1\">\n              <Link to='/home' className=\"log-in-hero-heading-link\">\n                Clear Mind\n              </Link>\n            </h1>\n          </div>\n        </div>\n      </div>\n      <div className=\"calendar\">\n        <ActivityCalendar \n          data={data} \n          showWeekdayLabels = {true}\n          blockSize={14}\n          blockRadius={7}\n          blockMargin={5}\n          fontSize={16}\n          theme={{\n            light: ['#f0f0f0', '#c4edde', '#7ac7c4', '#f73859', '#384259'],\n            dark: ['#383838', '#4D455D', '#7DB9B6', '#F5E9CF', '#E96479'],\n          }}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default Activity\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}